# ---------------------------------------------------------------------------------------------------------------------
# Global settings
# ---------------------------------------------------------------------------------------------------------------------
# Set default screenshot location
mkdir -p ~/Pictures/Screenshots
defaults write com.apple.screencapture "location" -string "~/Pictures/Screenshots" && killall SystemUIServer
# set to alwys show hidden files
defaults write -g AppleShowAllFiles -bool true


# ---------------------------------------------------------------------------------------------------------------------
# Security settings
# ---------------------------------------------------------------------------------------------------------------------
# Enable TouchID for sudo
# ! grep -q pam_tid.so /etc/pam.d/sudo && sudo gsed -i '2iauth        sufficient     pam_tid.so' /etc/pam.d/sudo


# ---------------------------------------------------------------------------------------------------------------------
# Dock settings: https://developer.apple.com/documentation/devicemanagement/dock
# ---------------------------------------------------------------------------------------------------------------------
# Set dock to autohide
defaults write com.apple.dock autohide -bool true
# Set dock to disable magnification
defaults write com.apple.dock magnification -bool false
# Minimize windows into their application’s icon
defaults write com.apple.dock minimize-to-application -bool true
# Set dock position
defaults write com.apple.dock orientation -string "bottom"
# Set the icon size of Dock items in pixels
defaults write com.apple.dock "tilesize" -int 71
# Don’t show recent applications in Dock
defaults write com.apple.dock show-recents -bool false
# Clear Dock of all default documents icons
defaults write com.apple.dock persistent-others -array
# Clear Dock of all default apps icons
defaults write com.apple.dock persistent-apps -array
# default apps that one might like: MS Teams, Outlook, Firefox, Chrome, VScode
# Those can be either from /Applications or /System/Applications
{{- $default_docks_apps := list "Microsoft Teams.app" "Microsoft Outlook.app" "Firefox.app" "Google Chrome.app" "Visual Studio Code.app" -}}
{{- for $app in $default_docks_apps -}}
defaults write com.apple.dock persistent-apps -array-add '<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>file:///Applications/{{ $app }}.app/</string><key>_CFURLStringType</key><integer>15</integer></dict></dict></dict>'
{{- end -}}

killall Dock


# ---------------------------------------------------------------------------------------------------------------------
# Software Update settings
# ---------------------------------------------------------------------------------------------------------------------
# Automatically check for updates
sudo defaults write /Library/Preferences/com.apple.SoftwareUpdate AutomaticCheckEnabled -bool true
# Download updates automatically in the background
sudo defaults write /Library/Preferences/com.apple.SoftwareUpdate AutomaticDownload -bool true
# Install macos updates automatically
sudo defaults write /Library/Preferences/com.apple.SoftwareUpdate AutomaticallyInstallMacOSUpdates -bool true
# Install system data file updates automatically
sudo defaults write /Library/Preferences/com.apple.SoftwareUpdate ConfigDataInstall -bool true
# Install critical security updates automatically
sudo defaults write /Library/Preferences/com.apple.SoftwareUpdate CriticalUpdateInstall -bool true
# Check for software updates daily, not just once per week
sudo defaults write /Library/Preferences/com.apple.SoftwareUpdate ScheduleFrequency -int 1
# Install app updates automatically
defaults write com.apple.commerce AutoUpdate -bool true

killall Finder